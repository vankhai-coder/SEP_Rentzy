@startuml admin_view_list_payout_request_class_diagram

title Admin View List Payout Request - Class Diagram

class PayoutManagement {
  +fetchPayouts(filters, pagination)
  +handleFilterChange(filters)
  +handlePaginationChange(page, size)
  +handleSearch(searchTerm)
  +handleSort(field, direction)
}

class PayoutTable {
  +handleSort(field)
  +renderPayoutRow(payout)
  +renderActionButtons(payout)
  +renderStatusBadge(status)
}

class PayoutFilters {
  +handleStatusChange(status)
  +handleDateRangeChange(range)
  +handleAmountRangeChange(range)
  +resetFilters()
}

class AdminPayoutRoute {
  +GET /payout-management
  +GET /payouts
  +GET /payouts/statistics
}

class verifyJWTToken {
  +verify(req, res, next)
}

class requireAdmin {
  +checkAdminRole(req, res, next)
}

class AdminPayoutController {
  +getPayouts(req, res)
  +getPayoutStatistics(req, res)
  +getBankQrCode(req, res)
}

class BookingPayout {
  +payout_id: BIGINT
  +booking_id: BIGINT
  +total_rental_amount: DECIMAL
  +platform_commission_rate: DECIMAL
  +payout_amount: DECIMAL
  +payout_status: ENUM
  +payout_method: ENUM
  +payout_account_info: JSON
  +requested_at: DATE
  +processed_at: DATE
  +completed_at: DATE
  +findAndCountAll(options)
  +findByPk(id)
}

class Booking {
  +booking_id: BIGINT
  +renter_id: BIGINT
  +vehicle_id: BIGINT
  +start_date: DATE
  +end_date: DATE
  +total_amount: DECIMAL
  +status: ENUM
  +findByPk(id)
}

class Vehicle {
  +vehicle_id: BIGINT
  +owner_id: BIGINT
  +model: STRING
  +license_plate: STRING
  +main_image_url: STRING
  +status: ENUM
  +findByPk(id)
}

class User {
  +user_id: BIGINT
  +full_name: STRING
  +email: STRING
  +phone_number: STRING
  +role: ENUM
  +findByPk(id)
}

class Bank {
  +bank_id: BIGINT
  +user_id: BIGINT
  +bank_name: STRING
  +account_number: STRING
  +account_holder_name: STRING
  +findOne(options)
}

PayoutManagement --> PayoutTable : renders
PayoutManagement --> PayoutFilters : renders
PayoutManagement --> AdminPayoutRoute : calls
AdminPayoutRoute --> verifyJWTToken : uses
AdminPayoutRoute --> requireAdmin : uses
AdminPayoutRoute --> AdminPayoutController : delegates to
AdminPayoutController --> BookingPayout : queries
AdminPayoutController --> Booking : queries
AdminPayoutController --> Vehicle : queries
AdminPayoutController --> User : queries
AdminPayoutController --> Bank : queries

BookingPayout }o--|| Booking : belongs to
Booking }o--|| User : renter
Booking }o--|| Vehicle : books
Vehicle }o--|| User : owner
Bank }o--|| User : belongs to

@enduml